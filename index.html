<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Atla â€” AI Agent</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Atla â€” Conversational AI Agent built by Sai Pranav Atla" />
  <meta name="color-scheme" content="dark" />
  <style>
    :root {
      --bg-0: #02040d;
      --bg-1: #050816;
      --panel: rgba(15, 23, 42, 0.62);
      --panel-strong: rgba(15, 23, 42, 0.82);
      --border: rgba(148, 163, 184, 0.28);
      --border-strong: rgba(148, 163, 184, 0.42);
      --text: rgba(226, 232, 240, 0.95);
      --muted: rgba(148, 163, 184, 0.86);
      --muted-2: rgba(148, 163, 184, 0.62);
      --accent: #7c3aed;
      --accent-2: #22d3ee;
      --accent-3: #fb7185;
      --shadow-soft: 0 22px 70px rgba(0, 0, 0, 0.55);
      --shadow-tight: 0 10px 30px rgba(2, 6, 23, 0.55);
      --radius-xl: 28px;
      --radius-lg: 18px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    ::selection { background: rgba(34, 211, 238, 0.24); }

    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(124, 58, 237, 0.22), transparent 60%),
        radial-gradient(1000px 500px at 85% 35%, rgba(34, 211, 238, 0.16), transparent 55%),
        radial-gradient(900px 520px at 50% 95%, rgba(251, 113, 133, 0.12), transparent 60%),
        linear-gradient(180deg, var(--bg-1), var(--bg-0));
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "Segoe UI", sans-serif;
      color: var(--text);
      padding: 26px 20px;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background:
        radial-gradient(800px 500px at 10% 20%, rgba(34, 211, 238, 0.11), transparent 60%),
        radial-gradient(700px 420px at 90% 30%, rgba(124, 58, 237, 0.12), transparent 60%);
      filter: blur(10px);
      animation: drift 12s ease-in-out infinite alternate;
      pointer-events: none;
      z-index: -2;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background-image:
        repeating-linear-gradient(90deg, rgba(255,255,255,0.012) 0, rgba(255,255,255,0.012) 1px, transparent 1px, transparent 9px),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.010) 0, rgba(255,255,255,0.010) 1px, transparent 1px, transparent 11px);
      opacity: 0.35;
      pointer-events: none;
      z-index: -1;
    }

    @keyframes drift {
      from { transform: translate3d(-1.5%, -1%, 0) scale(1.02); }
      to   { transform: translate3d(1.2%, 1.4%, 0) scale(1.02); }
    }

    /* â”€â”€ Top nav â”€â”€ */
    .nav {
      width: 100%;
      max-width: 960px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 22px;
      padding: 0 4px;
    }

    .nav-logo {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, #e2e8f0, rgba(34, 211, 238, 0.9));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .nav-logo span {
      font-weight: 300;
      opacity: 0.6;
    }

    .nav-links {
      display: flex;
      gap: 18px;
      font-size: 13px;
      color: var(--muted);
    }

    .nav-links a {
      color: var(--muted);
      text-decoration: none;
      transition: color 0.15s;
    }

    .nav-links a:hover { color: var(--text); }

    .nav-badge {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(34, 211, 238, 0.10);
      border: 1px solid rgba(34, 211, 238, 0.34);
      color: rgba(165, 243, 252, 0.92);
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    /* â”€â”€ Main layout â”€â”€ */
    .app-shell {
      width: 100%;
      max-width: 960px;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
      gap: 18px;
      align-items: start;
    }

    @media (max-width: 768px) {
      .app-shell { grid-template-columns: 1fr; }
      .sidebar-stack { display: none; }
    }

    /* â”€â”€ Chat card â”€â”€ */
    .chat-card {
      background: linear-gradient(180deg, rgba(15,23,42,0.70), rgba(2,6,23,0.72));
      border-radius: var(--radius-xl);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }

    .chat-card::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: conic-gradient(from 180deg, rgba(34,211,238,0.09), rgba(124,58,237,0.18), rgba(251,113,133,0.09), rgba(34,211,238,0.09));
      opacity: 0.65;
      mix-blend-mode: lighten;
      pointer-events: none;
      z-index: -1;
    }

    .chat-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
      gap: 10px;
    }

    .title-group { display: flex; flex-direction: column; gap: 4px; }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      background: rgba(2,6,23,0.55);
      border: 1px solid var(--border-strong);
      color: var(--muted);
    }

    .badge-dot {
      width: 7px; height: 7px;
      border-radius: 999px;
      background: var(--accent-2);
      box-shadow: 0 0 0 4px rgba(34,211,238,0.18), 0 0 22px rgba(34,211,238,0.22);
    }

    .app-title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title span { font-size: 13px; font-weight: 400; color: var(--muted); }

    .header-actions { display: flex; align-items: center; gap: 8px; }

    .pill {
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-strong);
      font-size: 11px;
      color: var(--muted);
      background: rgba(2,6,23,0.42);
    }

    /* â”€â”€ Chat box â”€â”€ */
    .chat-box {
      flex: 1;
      min-height: 300px;
      max-height: 420px;
      border-radius: var(--radius-lg);
      background: linear-gradient(180deg, rgba(2,6,23,0.55), rgba(2,6,23,0.36));
      border: 1px solid var(--border-strong);
      padding: 14px;
      overflow-y: auto;
      font-size: 14px;
      scroll-behavior: smooth;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .chat-box::-webkit-scrollbar { width: 5px; }
    .chat-box::-webkit-scrollbar-thumb { background: rgba(51,65,85,0.82); border-radius: 999px; }

    .message { display: flex; gap: 10px; align-items: flex-end; line-height: 1.5; }
    .message.user { flex-direction: row-reverse; }

    .avatar {
      width: 30px; height: 30px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      border: 1px solid var(--border-strong);
      background: rgba(2,6,23,0.60);
      flex-shrink: 0;
    }

    .message.ai .avatar   { color: rgba(34,211,238,0.92); box-shadow: 0 0 0 1px rgba(34,211,238,0.10), 0 0 24px rgba(34,211,238,0.10); }
    .message.user .avatar { color: rgba(124,58,237,0.92); box-shadow: 0 0 0 1px rgba(124,58,237,0.10), 0 0 26px rgba(124,58,237,0.10); }

    .bubble {
      max-width: min(520px, 100%);
      padding: 10px 13px;
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.26);
      background: rgba(2,6,23,0.55);
      white-space: pre-wrap;
      word-break: break-word;
    }

    .message.ai .bubble { border-color: rgba(34,211,238,0.32); }

    .placeholder-copy { font-size: 13px; color: var(--muted-2); text-align: center; margin: auto; }

    /* â”€â”€ Input row â”€â”€ */
    .input-row {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(2,6,23,0.52);
      border: 1px solid var(--border-strong);
    }

    .input-row input[type="text"] {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 14px;
      padding: 4px 4px;
    }

    .input-row input::placeholder { color: rgba(148,163,184,0.55); }

    .send-button {
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      background: linear-gradient(135deg, rgba(124,58,237,0.95), rgba(34,211,238,0.92));
      color: white;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.04em;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 14px 44px rgba(124,58,237,0.35), 0 10px 36px rgba(34,211,238,0.16);
      transition: transform 0.08s ease, filter 0.10s ease;
      white-space: nowrap;
    }

    .send-button:hover  { transform: translateY(-1px); filter: brightness(1.06); }
    .send-button:active { transform: translateY(1px); }
    .send-button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; filter: none; }

    .ghost-button {
      border: 1px solid var(--border-strong);
      background: rgba(2,6,23,0.40);
      color: var(--muted);
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 11px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      transition: border-color 0.10s, color 0.10s;
    }

    .ghost-button:hover { border-color: rgba(34,211,238,0.55); color: var(--text); }

    .error-banner {
      display: none;
      padding: 7px 11px;
      border-radius: 10px;
      background: rgba(239,68,68,0.12);
      border: 1px solid rgba(248,113,113,0.6);
      color: #fecaca;
      font-size: 12px;
    }

    /* â”€â”€ Shimmer loading â”€â”€ */
    .loading { position: relative; overflow: hidden; }
    .loading::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(226,232,240,0.10) 50%, transparent);
      transform: translateX(-120%);
      animation: shimmer 1.1s ease-in-out infinite;
    }
    @keyframes shimmer { to { transform: translateX(120%); } }

    /* â”€â”€ Sidebar â”€â”€ */
    .sidebar-stack { display: flex; flex-direction: column; gap: 14px; }

    .sidebar {
      border-radius: var(--radius-xl);
      padding: 16px;
      background: rgba(15,23,42,0.60);
      border: 1px solid var(--border);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      font-size: 13px;
      color: var(--muted);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .sidebar::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background:
        radial-gradient(600px 380px at 15% 20%, rgba(124,58,237,0.14), transparent 65%),
        radial-gradient(650px 380px at 85% 40%, rgba(34,211,238,0.10), transparent 65%);
      pointer-events: none;
      z-index: -1;
    }

    .sidebar h2 { font-size: 14px; font-weight: 600; color: var(--text); margin-bottom: 8px; }
    .sidebar p  { line-height: 1.55; margin-bottom: 6px; }

    .chip-row { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
    .chip {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid var(--border-strong);
      background: rgba(2,6,23,0.34);
      font-size: 11px;
      color: var(--muted);
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(34,211,238,0.10);
      border: 1px solid rgba(34,211,238,0.34);
      color: rgba(165,243,252,0.92);
      font-size: 11px;
      margin-top: 8px;
    }

    .status-dot { width: 7px; height: 7px; border-radius: 999px; background: var(--accent-2); }

    .divider { height: 1px; background: var(--border); margin: 8px 0; }

    /* â”€â”€ Footer â”€â”€ */
    .footer {
      margin-top: 28px;
      font-size: 12px;
      color: var(--muted-2);
      text-align: center;
    }

    .footer a { color: var(--muted); text-decoration: none; }
    .footer a:hover { color: var(--text); }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="nav">
    <div class="nav-logo">atla<span>.in</span></div>
    <div class="nav-links">
      <a href="https://github.com/saipranavAtla" target="_blank">GitHub</a>
      <a href="https://linkedin.com/in/saipranavAtla" target="_blank">LinkedIn</a>
      <span class="nav-badge">v1.0 live</span>
    </div>
  </nav>

  <!-- MAIN -->
  <div class="app-shell">

    <!-- CHAT -->
    <main class="chat-card">
      <header class="chat-header">
        <div class="title-group">
          <span class="badge">
            <span class="badge-dot"></span>
            Atla AI
          </span>
          <div class="app-title">
            Conversational Agent
            <span>RAG Â· Memory Â· FastAPI</span>
          </div>
        </div>
        <div class="header-actions">
          <button class="ghost-button" onclick="clearChat()">Clear</button>
          <span class="pill" id="backend-pill">Claude API</span>
        </div>
      </header>

      <div id="chat-box" class="chat-box">
        <div class="placeholder-copy">
          Ask me anything. I have persistent memory and can answer questions about topics I've been trained on.
        </div>
      </div>

      <div class="input-row">
        <input
          type="text"
          id="user-input"
          placeholder="Ask me anythingâ€¦"
          autocomplete="off"
          onkeydown="if(event.key === 'Enter') sendMessage()"
        />
        <button class="send-button" id="send-button" onclick="sendMessage()">
          â¤ Send
        </button>
      </div>

      <div id="error-banner" class="error-banner"></div>
    </main>

    <!-- SIDEBAR -->
    <aside class="sidebar-stack">

      <div class="sidebar">
        <h2>ğŸ¤– What is Atla?</h2>
        <p>A production-grade AI agent with <strong>persistent memory</strong> powered by ChromaDB, a <strong>FastAPI</strong> backend, and the Claude API.</p>
        <p>It remembers context across conversations and uses <strong>RAG</strong> (Retrieval-Augmented Generation) to answer questions from its knowledge base.</p>
        <div class="chip-row">
          <span class="chip">FastAPI</span>
          <span class="chip">ChromaDB</span>
          <span class="chip">RAG</span>
          <span class="chip">Claude API</span>
          <span class="chip">Python 3.13</span>
        </div>
      </div>

      <div class="sidebar">
        <h2>âš¡ Stack</h2>
        <p><strong>Backend:</strong> FastAPI + Uvicorn</p>
        <p><strong>Memory:</strong> ChromaDB vector store</p>
        <p><strong>LLM:</strong> Claude API (Ollama fallback)</p>
        <p><strong>Deploy:</strong> Railway / Render</p>
        <div class="divider"></div>
        <div id="api-status">
          <span class="status-pill">
            <span class="status-dot"></span>
            Checking backendâ€¦
          </span>
        </div>
      </div>

      <div class="sidebar">
        <h2>ğŸ‘‹ Built by</h2>
        <p>Sai Pranav Atla â€” AI Engineer based in Bengaluru.</p>
        <p>This project demonstrates full-stack AI engineering: prompt engineering, vector databases, REST APIs, and deployment.</p>
        <div class="chip-row">
          <a href="https://github.com/saipranavAtla" target="_blank" style="text-decoration:none">
            <span class="chip" style="cursor:pointer">GitHub â†—</span>
          </a>
          <a href="https://linkedin.com/in/saipranavAtla" target="_blank" style="text-decoration:none">
            <span class="chip" style="cursor:pointer">LinkedIn â†—</span>
          </a>
        </div>
      </div>

    </aside>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    atla.in Â· Built by <a href="https://linkedin.com/in/saipranavAtla">Sai Pranav Atla</a> Â· 2025
  </footer>

  <script>
    // â”€â”€ Config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Change this to your deployed backend URL when you push to Railway/Render
    const API_BASE = window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1"
      ? "http://127.0.0.1:8000"
      : "https://your-app.up.railway.app";   // â† UPDATE THIS after deploying

    // â”€â”€ Health check on load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function checkHealth() {
      try {
        const r = await fetch(`${API_BASE}/health`, { method: "GET" });
        const d = await r.json();
        document.getElementById("api-status").innerHTML = `
          <span class="status-pill">
            <span class="status-dot"></span>
            Backend online Â· ${d.backend}
          </span>`;
        document.getElementById("backend-pill").textContent = d.backend === "claude" ? "Claude API" : "Ollama";
      } catch {
        document.getElementById("api-status").innerHTML = `
          <span class="status-pill" style="background:rgba(239,68,68,0.10);border-color:rgba(248,113,113,0.5);color:#fca5a5;">
            <span class="status-dot" style="background:#ef4444"></span>
            Backend offline
          </span>`;
      }
    }

    checkHealth();

    // â”€â”€ Chat helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function clearChat() {
      const box = document.getElementById("chat-box");
      box.innerHTML = "";
      appendPlaceholder(box);
    }

    function appendPlaceholder(box) {
      const p = document.createElement("div");
      p.className = "placeholder-copy";
      p.textContent = "Ask me anything. I have persistent memory and RAG-based context.";
      box.appendChild(p);
    }

    function removePlaceholder(box) {
      box.querySelector(".placeholder-copy")?.remove();
    }

    function appendMessage(box, role, text, { loading = false } = {}) {
      const msg = document.createElement("div");
      msg.className = `message ${role}`;

      const avatar = document.createElement("div");
      avatar.className = "avatar";
      avatar.textContent = role === "user" ? "You" : "AI";

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      if (loading) bubble.classList.add("loading");
      bubble.textContent = text;

      msg.appendChild(avatar);
      msg.appendChild(bubble);
      box.appendChild(msg);
      return bubble;
    }

    // â”€â”€ Send message â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function sendMessage() {
      const input      = document.getElementById("user-input");
      const box        = document.getElementById("chat-box");
      const errorEl    = document.getElementById("error-banner");
      const sendBtn    = document.getElementById("send-button");
      const userText   = input.value.trim();
      if (!userText) return;

      errorEl.style.display = "none";
      removePlaceholder(box);
      appendMessage(box, "user", userText);
      input.value = "";
      input.focus();

      sendBtn.disabled = true;
      const aiBubble = appendMessage(box, "ai", "Thinkingâ€¦", { loading: true });
      box.scrollTop = box.scrollHeight;

      try {
        const res = await fetch(`${API_BASE}/generate/`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: userText }),
        });

        if (!res.ok) throw new Error(`Server returned ${res.status}`);

        const data = await res.json();
        aiBubble.classList.remove("loading");
        aiBubble.textContent = data.response ?? "(no response)";
      } catch (err) {
        aiBubble.classList.remove("loading");
        aiBubble.textContent = "Could not reach the backend. Is FastAPI running?";
        errorEl.textContent = "Error: " + (err?.message ?? String(err));
        errorEl.style.display = "block";
      } finally {
        sendBtn.disabled = false;
        input.focus();
        box.scrollTop = box.scrollHeight;
      }
    }
  </script>
</body>
</html>